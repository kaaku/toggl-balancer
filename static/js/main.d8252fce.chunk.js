(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{128:function(e,t,a){e.exports=a(290)},290:function(e,t,a){"use strict";a.r(t);var n=a(117),r=a(47),o=a(16),i=a(0),s=a.n(i),c=a(19),l=a.n(c);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var u=a(26),d=a(27),h=a(29),m=a(28),f=a(30),p=a(18),b=a.n(p),g=a(10),E=a.n(g),y=a(25),v=a(35),O=a.n(v),w=a(57),D=a.n(w),j=a(60),k=a.n(j),C=a(58),T=a.n(C),S=a(120),M=a.n(S),Y=a(119),I=a.n(Y),P=a(121),x=a.n(P),B=a(59),F=a.n(B),_=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(h.a)(this,Object(m.a)(t).call(this,e))).state={apiToken:""},a.handleChange=a.handleChange.bind(Object(y.a)(Object(y.a)(a))),a.handleClose=a.handleClose.bind(Object(y.a)(Object(y.a)(a))),a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"handleChange",value:function(e){this.setState({apiToken:e.target.value})}},{key:"handleClose",value:function(){this.props.onClose(this.state.apiToken)}},{key:"render",value:function(){return s.a.createElement(D.a,{open:this.props.open,disableBackdropClick:this.props.mandatory,disableEscapeKeyDown:this.props.mandatory,"aria-labelledby":"form-dialog-title"},s.a.createElement(I.a,{id:"form-dialog-title"},"Enter your Toggl API Token"),s.a.createElement(T.a,null,s.a.createElement(M.a,null,"Your Toggl time entries will be fetched using your API Token, which you can find from your"," ",s.a.createElement("a",{href:"https://www.toggl.com/app/profile",target:"_blank",rel:"noopener noreferrer"},"Toggl profile ",s.a.createElement(x.a,{fontSize:"small"},"open_in_new")),"."),s.a.createElement(F.a,{autoFocus:!0,fullWidth:!0,margin:"dense",label:"API Token",onChange:this.handleChange})),s.a.createElement(k.a,null,s.a.createElement(O.a,{color:"primary",onClick:this.handleClose,disabled:!this.props.mandatory||!this.state.apiToken},"Submit")))}}]),t}(i.Component);_.defaultProps={mandatory:!1};var A=Object(o.withStyles)({},{withTheme:!0})(_),N=a(20),V=a(127),U=a(7),W=a.n(U),q=a(33),z=a.n(q),H=a(17),J=a.n(H),L=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(h.a)(this,Object(m.a)(t).call(this,e))).getDataForDate=a.getDataForDate.bind(Object(y.a)(Object(y.a)(a))),a.isIncluded=a.isIncluded.bind(Object(y.a)(Object(y.a)(a))),a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){for(var e=this,t=this.props,a=t.data,n=t.defaultContent,r=t.classes,o=E()({year:this.props.year,month:this.props.month-1,day:1}),i=E()(o).startOf("week"),c=E()(o).endOf("month").startOf("day"),l=E()(c).endOf("week").startOf("day"),u=[],d=[],h=Math.round(E.a.duration(l.diff(i)).asDays())+1;u.length<h;)u.push(E()(i).add(u.length,"days").format("YYYY-MM-DD"));for(;u.length>0;)d.push(u.splice(0,7));return s.a.createElement(s.a.Fragment,null,d.map(function(t){return s.a.createElement(b.a,{container:!0,spacing:16,key:E()(t[0]).week()},t.map(function(t){return s.a.createElement(b.a,{item:!0,xs:!0,key:t},s.a.createElement(z.a,{className:W()(r.calendarCell,Object(N.a)({},r.disabled,!e.isIncluded(t)))},s.a.createElement(J.a,{variant:"overline",gutterBottom:!0},E()(t).format("DD")),a[t]&&a[t],!a[t]&&e.isIncluded(t)&&n))}))}))}},{key:"isIncluded",value:function(e){return E()(e).month()+1===this.props.month}},{key:"getDataForDate",value:function(e){return this.props.data[e]?this.props.data[e].reduce(function(e,t){return e+t.duration},0):""}}]),t}(i.Component),R=Object(o.withStyles)(function(e){return{calendarCell:{padding:10,height:"100%"},disabled:{backgroundColor:e.palette.grey[200]}}},{withTheme:!0})(L),G=function(e){var t=e.duration,a=e.useColors,n=e.textProps,r=0===t?"":t>0?"+":"-",o=E.a.duration(Math.abs(t),"seconds"),i=Math.floor(o.asHours())+":"+o.minutes().toString().padStart(2,"0");return a&&(n.color=t<0?"error":"primary"),s.a.createElement(J.a,n,r,i)};G.defaultProps={useColors:!1,textProps:{}};var K=Object(o.withStyles)({},{withTheme:!0})(G),$=E.a.duration("7:30").asSeconds();function Q(e,t){return t.filter(function(t){return E()(t.start).isSame(e,"month")}).reduce(function(e,t){var a=E()(t.start).format("YYYY-MM-DD");return e[a]=(e[a]||-$)+t.duration,e},{})}function X(e){return Object.assign.apply(Object,[{}].concat(Object(V.a)(Object.keys(e).map(function(t){return Object(N.a)({},t,(a=e[t],s.a.createElement(K,{duration:a,useColors:!0,textProps:{variant:"h6",align:"center"}})));var a}))))}var Z=Object(o.withStyles)(function(e){return{root:{padding:10*e.spacing.unit}}},{withTheme:!0})(function(e){var t=e.startDate,a=e.endDate,n=e.timeEntries,r=e.classes;if(!t.isAfter(a)){for(var o=[],i=E()(t).startOf("month");i.isBefore(a);){var c=Q(i,n);o.push({firstDayOfMonth:i,totalDiff:Object.values(c).reduce(function(e,t){return e+t},0),monthViewData:X(c)}),i=E()(i).add(1,"month")}return s.a.createElement(b.a,{container:!0,justify:"center",spacing:40,className:r.root},o.map(function(e){var t=e.firstDayOfMonth,a=e.totalDiff,n=e.monthViewData;return s.a.createElement(b.a,{item:!0,xs:12,lg:6,key:t.format("YYYY-MM")},s.a.createElement(b.a,{container:!0,justify:"space-between"},s.a.createElement(b.a,{item:!0},s.a.createElement(J.a,{variant:"h2",gutterBottom:!0},t.format("MMMM YYYY"))),s.a.createElement(b.a,{item:!0},s.a.createElement(K,{duration:a,useColors:!0,textProps:{variant:"h2",gutterBottom:!0}}))),s.a.createElement(R,{year:t.year(),month:t.month()+1,data:n,defaultContent:s.a.createElement(J.a,{variant:"h6",color:"textSecondary",align:"center"},"-")}))}))}}),ee=Object(o.withStyles)(function(e){return{root:{padding:4*e.spacing.unit}}},{withTheme:!0})(function(e){var t=e.startDate,a=e.endDate,n=e.onChange,o=e.classes;return s.a.createElement(z.a,{className:o.root},s.a.createElement(b.a,{container:!0,justify:"space-evenly",spacing:40},s.a.createElement(b.a,{item:!0},s.a.createElement(r.a,{value:t,label:"From",autoOk:!0,disableFuture:!0,clearable:!0,onChange:function(e){return n({startDate:e,endDate:a})}})),s.a.createElement(b.a,{item:!0},s.a.createElement(r.a,{value:a,label:"To",autoOk:!0,clearable:!0,onChange:function(e){return n({startDate:t,endDate:e})}}))))}),te="https://www.toggl.com/api/v8/time_entries";var ae={fetchTimeEntries:function(e,t,a){if(!e&&!t)throw Error("Either start date or end date is required");if(!a)throw Error("API token is required");var n=e?E()(e):null,r=t?E()(t).add(1,"day"):null;if(n&&!n.isValid()||r&&!r.isValid())throw Error("Start date and/or end date were invalid");var o=new URL(te),i={};return n&&(i.start_date=n.toISOString()),r&&(i.end_date=r.toISOString()),o.search=new URLSearchParams(i),fetch(o,{method:"GET",headers:new Headers({Authorization:"Basic "+btoa("".concat(a,":api_token")),"Content-Type":"application/json"})}).then(function(e){return e.json()})}},ne=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(h.a)(this,Object(m.a)(t).call(this,e))).state={apiToken:"",startDate:E()().startOf("month"),endDate:E()().endOf("month").startOf("day"),timeEntries:[]},a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"updateTimeEntries",value:function(){var e=this,t=this.state,a=t.startDate,n=t.endDate,r=t.apiToken;ae.fetchTimeEntries(a,n,r).then(function(t){return e.setState({timeEntries:t})},function(t){return e.setState({error:t.toString()})})}},{key:"componentDidUpdate",value:function(e,t,a){var n=this.state,r=n.startDate,o=n.endDate,i=n.apiToken;t.startDate===r&&t.endDate===o&&t.apiToken===i||this.updateTimeEntries()}},{key:"render",value:function(){var e=this,t=this.state,a=t.startDate,n=t.endDate,r=t.apiToken,o=t.timeEntries,i=this.props.classes;return r?s.a.createElement(s.a.Fragment,null,s.a.createElement(b.a,{container:!0,justify:"center",className:i.dateSelectorContainer},s.a.createElement(b.a,{item:!0},s.a.createElement(ee,{startDate:a,endDate:n,onChange:function(t){var a=t.startDate,n=t.endDate;return e.setState({startDate:a,endDate:n})}}))),o.length>0&&s.a.createElement(Z,{startDate:a,endDate:n,timeEntries:o}),this.state.error&&s.a.createElement("div",null,this.state.error)):s.a.createElement(A,{open:!r,mandatory:!r,onClose:function(t){return e.setState({apiToken:t})}})}}]),t}(i.Component),re=Object(o.withStyles)(function(e){return{dateSelectorContainer:{marginTop:5*e.spacing.unit}}},{withTheme:!0})(ne),oe=a(126),ie=Object(o.createMuiTheme)({typography:{useNextVariants:!0}});l.a.render(s.a.createElement(o.MuiThemeProvider,{theme:ie},s.a.createElement(oe.a,null),s.a.createElement(r.b,{utils:n.a},s.a.createElement(re,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[128,2,1]]]);
//# sourceMappingURL=main.d8252fce.chunk.js.map